/* ======================
   Layout profesional y responsivo (FR/MA)
   ====================== */

/* Normalización y box-sizing seguro */
*,*::before,*::after{ box-sizing:border-box; }
html{ -webkit-text-size-adjust:100%; }

:root{
  --ff-sans:"Inter",system-ui,-apple-system,Segoe UI,Roboto,Arial,sans-serif;
  --ff-serif:"Source Serif 4",Georgia,"Times New Roman",serif;

  --brand-700:#1D4ED8; --brand-600:#2563EB; --brand-500:#3B82F6; --brand-400:#60A5FA;

  --surface-0:#0A1020; --surface-1:#0D1324;
  --text:#E5E7EB; --text-strong:#FFF; --muted:#A7B0C0;

  /* Card “blanco azulado” */
  --field-bg:#F5F8FF; --field-text:#0F172A; --field-border:#B6C6E5;
  --field-border-hover:#90A8D7; --field-placeholder:#475569;

  /* Escala 8‑pt */
  --space-1:.5rem; --space-2:1rem; --space-3:1.5rem; --space-4:2rem; --space-5:2.5rem; --space-6:3rem;

  /* Gutters + container */
  --gutter: clamp(16px, 4vw, 32px);
  --gutter-lg: clamp(24px, 2.5vw, 40px);
  --content-max: 1200px;
  --measure: 65ch;

  --radius-2:.75rem; --radius-3:1rem;
  --shadow-1:0 10px 30px rgba(0,0,0,.28);

  --cta-grad: linear-gradient(135deg, var(--brand-600), var(--brand-400));
}

/* Contenedor consistente + safe‑area */
.container{
  width: min(100% - calc(2 * var(--gutter)), var(--content-max));
  margin-inline:auto;
  padding-inline:
    max(var(--gutter), env(safe-area-inset-left))
    max(var(--gutter), env(safe-area-inset-right));
}

/* Fondo general */
body{
  font-family:var(--ff-sans);
  background:
    radial-gradient(1200px 600px at 10% -10%, #0C1630 0%, transparent 60%),
    radial-gradient(1200px 600px at 110% 20%, #0A1B40 0%, transparent 60%),
    linear-gradient(180deg, var(--surface-0), var(--surface-1));
  color:var(--text); min-height:100dvh; position:relative;
}
body::before{
  content:""; position:fixed; inset:0; pointer-events:none; z-index:0;
  background-image:url("data:image/svg+xml;utf8,<svg xmlns='http://www.w3.org/2000/svg' width='300' height='300' viewBox='0 0 300 300'><filter id='n'><feTurbulence type='fractalNoise' baseFrequency='0.9' numOctaves='4' stitchTiles='stitch'/></filter><rect width='300' height='300' filter='url(%23n)' opacity='0.15'/></svg>");
  background-size:300px 300px; mix-blend-mode:soft-light; opacity:.05;
}

/* Tipografía fluida contenida */
h1{ font-family:var(--ff-serif); font-weight:700; line-height:1.12; font-size:clamp(1.75rem, 4.2vw + .4rem, 2.8rem); color:var(--text-strong); }
h2{ font-family:var(--ff-serif); font-weight:700; line-height:1.2;  font-size:clamp(1.3rem, 1.1vw + 1rem, 2rem); color:var(--text-strong); }
h3{ font-family:var(--ff-serif); font-weight:700; color:var(--text-strong); }
.lead{ color:var(--text); font-size:clamp(1rem,.5vw + .9rem,1.125rem); }

/* Header */
.site-header nav a.brand{ text-decoration:none; color:var(--brand-400); }

/* Skip link */
.skip-link{ position:absolute; left:-9999px; width:1px; height:1px; overflow:hidden; }
.skip-link:focus{ position:static; padding:.5rem; background:#fff; color:#000; border-radius:.25rem; }

/* ===== HERO */
.hero{
  position:relative; isolation:isolate; overflow:hidden;
  border-radius:clamp(12px, 2vw, 20px);
  margin-block: clamp(16px, 4vw, 48px);
  padding: var(--gutter-lg) var(--gutter);
}
.hero-inner{
  position:relative; z-index:1;
  display:grid; gap:clamp(20px,3vw,40px);
  grid-template-columns: minmax(0,1fr) minmax(320px,420px);
  align-items:start;
}
.hero-content{ max-width:min(var(--measure),64ch); }
.form-card{ width:100%; max-width:420px; }
@media (max-width:980px){ .hero-inner{ grid-template-columns:1fr; } .form-card{ max-width:none; } }

.hero-media{ position:absolute; inset:0; z-index:0; overflow:hidden; transform:translateZ(0); }
.hero-media picture,.hero-media img{ width:100%; height:100%; object-fit:cover; display:block; filter:saturate(105%); }
.hero-scrim{
  position:absolute; inset:0; z-index:1; pointer-events:none;
  background:
    radial-gradient(1200px 400px at 20% 10%, rgba(37,99,235,.18), transparent 60%),
    linear-gradient(90deg, rgba(10,15,25,.72) 0%, rgba(10,15,25,.46) 40%, rgba(10,15,25,.20) 70%, rgba(10,15,25,.0) 100%);
}

/* Parallax si hay soporte */
@keyframes heroParallax{ from{transform:translateY(-4%);} to{transform:translateY(4%);} }
@supports (animation-timeline:view()){
  .hero-media.parallax{ animation-name:heroParallax; animation-duration:1ms; animation-timing-function:linear; animation-fill-mode:both; animation-timeline:view(); animation-range:cover 0% cover 100%; }
}
@media (prefers-reduced-motion:reduce){ .hero-media.parallax{ animation:none !important; } }

/* Badges */
.badges{ display:flex; flex-wrap:wrap; gap:.6rem; padding:0; list-style:none; margin-top:var(--space-2); }
.badge{ display:inline-flex; align-items:center; gap:.45rem; color:var(--text); background:rgba(255,255,255,.06); padding:.35rem .6rem; border-radius:999px; }

/* ===== FORM CARD (blanco azulado) */
.form-card{
  color:#0f172a; border-radius:var(--radius-3);
  padding:clamp(18px, 2.2vw, 24px);
  box-shadow:var(--shadow-1);
  background:linear-gradient(180deg,#F3F8FF 0%, #E6F0FF 100%);
  border:1px solid rgba(30,58,138,.08);
  backdrop-filter:saturate(120%) blur(6px);

  /* CLIP SEGURO → NADA PUEDE SALIR DEL CARD */
  overflow:hidden;
  /* Fallback adicional en navegadores raros */
  clip-path: inset(0 round var(--radius-3));

  /* Overrides Pico dentro del card */
  --pico-form-element-background-color:var(--field-bg);
  --pico-form-element-color:var(--field-text);
  --pico-form-element-border-color:var(--field-border);
  --pico-form-element-hover-border-color:var(--field-border-hover);
  --pico-form-element-focus-color:var(--brand-600);
  --pico-form-element-placeholder-color:var(--field-placeholder);
  --pico-muted-color:#0f172a;
}
.form-card :is(h1,h2,h3,h4,h5,h6,p,small:not(.error),label,legend){ color:#0f172a !important; opacity:1 !important; }
.form-title{ margin-bottom:.2rem; font-family:var(--ff-serif); }
.form-desc{ margin-top:0; color:#334155; }

/* ===== STEPPER (nada excede el card) */
.stepper{ display:grid; gap:var(--space-2); max-width:100%; }
.step{
  border:1px solid rgba(30,58,138,.10); border-radius:.75rem;
  background:linear-gradient(180deg, rgba(255,255,255,.88), rgba(246,250,255,.88));
  backdrop-filter:saturate(120%) blur(2px);
  max-width:100%;
}
.step-header{ display:flex; align-items:center; gap:.6rem; padding:.65rem var(--space-2); max-width:100%; }
.step-index{
  width:24px; height:24px; border-radius:50%; background:var(--brand-600); color:#fff;
  font-weight:700; display:grid; place-items:center; font-size:.85rem; flex:0 0 auto;
}
.step.is-complete .step-index{ background:#22C55E; }
.step-title{ margin:0; color:#0f172a; font-size:clamp(1rem,.6vw + .9rem,1.125rem); }
.step-body{
  overflow:hidden; max-height:0; max-width:100%;
  padding:0 var(--space-2);
  transition:max-height .35s ease, padding-top .35s ease, padding-bottom .35s ease;
}
.step.is-active .step-body{ max-height:1000px; padding:var(--space-2); }
.step-actions{
  display:flex; gap:.5rem; justify-content:flex-end; padding:0 var(--space-2) var(--space-2);
  max-width:100%;
}
.step-actions > *{ max-width:100%; }

/* Sin JS: todos los pasos abiertos */
.no-js .step .step-body{ max-height:none !important; padding:var(--space-2) !important; }

/* ===== Inputs compactos y al 100% */
.field{ position:relative; max-width:100%; }
.form-card input[type="text"],
.form-card input[type="tel"],
.form-card select,
.form-card textarea{
  background-color:var(--field-bg); color:var(--field-text);
  border:1px solid var(--field-border); min-height:44px;
  transition:box-shadow .15s ease, border-color .15s ease, background-color .15s ease;
  width:100%; max-width:100%;
}
.form-card :is(input,select,textarea):focus{
  border-color:var(--brand-600); box-shadow:0 0 0 6px rgba(37,99,235,.12);
}
.form-card input::placeholder, .form-card textarea::placeholder{ color:var(--field-placeholder); }

/* Etiqueta flotante (sin solape) */
.floating input, .floating textarea{ padding-top:1.1rem; }
.floating label{
  position:absolute; left:.75rem; top:.72rem; pointer-events:none;
  font-size:.94rem; line-height:1; color:#64748b; padding:0 .25rem; background:transparent;
  transform-origin:left top; transition:transform .18s ease, color .18s ease, top .18s ease, background-color .18s ease;
}
.floating input::placeholder, .floating textarea::placeholder{ opacity:0; transition:opacity .12s ease; }
.floating input:focus::placeholder, .floating textarea:focus::placeholder{ opacity:.65; }
.floating :is(input,textarea):focus + label,
.floating :is(input,textarea):not(:placeholder-shown) + label{
  top:.28rem; transform:translateY(-.28rem) scale(.88); color:var(--brand-700); background:#F3F8FF;
}

/* Hints, errores y contador */
.field .hint{ display:none; }
.field:focus-within .hint{ display:inline-block; color:#475569; margin-top:.25rem; }
:focus-visible{ outline:2px solid var(--brand-500); outline-offset:2px; border-radius:.25rem; }
.form-card :is(input,select,textarea)[aria-invalid="true"]{ border-color:#b00020 !important; outline-color:#b00020 !important; box-shadow:none; }
.error{ color:#b00020; min-height:1.05rem; display:inline-block; }
.count{ color:#475569; }

/* Turnstile responsivo — nunca excede el ancho */
.cf-turnstile{ width:100%; max-width:100%; overflow:hidden; }
.cf-turnstile iframe{ max-width:100% !important; }

/* Honeypot oculto */
.hp{ position:absolute; left:-9999px; width:1px; height:1px; opacity:0; pointer-events:none; }

/* Botones: ≥44px pero contenidos */
button.primary, .cta-primary, .btn-secondary{
  font-size:1rem; padding:.7rem 1rem; min-height:44px; border-radius:.7rem;
}
.cta-primary{ background:var(--cta-grad); color:#fff; border:none; box-shadow:0 8px 24px rgba(37,99,235,.28); }
.cta-primary:hover{ filter:brightness(1.06); }

/* Error summary */
.error-summary{
  border:2px solid #b00020; border-radius:.5rem;
  padding:.7rem 1rem; background:#fff5f5; color:#3a0a0a; margin-bottom:var(--space-2);
}
.error-summary h3{ margin:0 0 .25rem; font-size:1rem; }
.error-summary ul{ margin:0; padding-left:1rem; }

/* Secciones inferiores */
.steps{ padding-block: var(--space-5); }
.steps-grid{ display:grid; gap:var(--space-2); grid-template-columns: repeat(3,1fr); }
@media (max-width:980px){ .steps-grid{ grid-template-columns:1fr; } }
.step-card{ background:#0F172A; color:var(--text); border-radius:var(--radius-2); padding:var(--space-3); box-shadow:var(--shadow-1); }

/* FAQ */
.faq details{ background:#0F172A; color:var(--text); border-radius:var(--radius-2); margin-block:.5rem; padding:.75rem 1rem; box-shadow:var(--shadow-1); }
.faq summary{ font-weight:600; }

/* Footer */
footer{ padding-block: var(--space-4) var(--space-6); color:var(--muted); }
